(function($){$(document).ready(function(){var anim_order=new Array();anim_order=["topleft","topright","bottomleft","bottomright"];function setSlidesPositionData(){var pos=0;slides.each(function(){if($(this).attr("id")!="pristine-slide-1"){if(anim_order[pos]=="topleft"){$(this).find(".pristine-rightbox").css({"margin-left":-sliderHeight,"margin-top":-sliderWidth});$(this).find(".pristine-leftbox").css({"margin-left":sliderHeight,"margin-top":sliderWidth});$(this).data({x:-sliderHeight,y:-sliderWidth});}if(anim_order[pos]=="topright"){$(this).find(".pristine-rightbox").css({"margin-left":sliderHeight,"margin-top":-sliderWidth});$(this).find(".pristine-leftbox").css({"margin-left":-sliderHeight,"margin-top":sliderWidth});$(this).data({x:sliderHeight,y:-sliderWidth});}if(anim_order[pos]=="bottomleft"){$(this).find(".pristine-rightbox").css({"margin-left":-sliderHeight,"margin-top":sliderWidth});$(this).find(".pristine-leftbox").css({"margin-left":sliderHeight,"margin-top":-sliderWidth});$(this).data({x:-sliderHeight,y:sliderWidth});}if(anim_order[pos]=="bottomright"){$(this).find(".pristine-rightbox").css({"margin-left":sliderHeight,"margin-top":sliderWidth});$(this).find(".pristine-leftbox").css({"margin-left":-sliderHeight,"margin-top":-sliderWidth});$(this).data({x:sliderHeight,y:sliderWidth});}}else{$(this).data({x:-sliderHeight,y:-sliderWidth});}pos++;if(pos==slides.length){pos=0;}});}function transitionIn(index){var slide=$(slides[index]);slide.find(".pristine-leftbox").animate({"margin-left":0,"margin-top":0},transition_duration);slide.find(".pristine-rightbox").animate({"margin-left":0,"margin-top":0},transition_duration);}function transitionOut(index){var slide=$(slides[index]);slide.find(".pristine-leftbox").animate({"margin-left":slide.data("x"),"margin-top":slide.data("y")},transition_duration);slide.find(".pristine-rightbox").animate({"margin-left":-slide.data("x"),"margin-top":-slide.data("y")},transition_duration);}var interval,wrapper,slides,currentSlideIndex=0,sliderWidth,sliderHeight,slideDuration=4000,transition_duration=1000;var arrowsNext,arrowsPrev;var pagers;var playButton;init();events();setSlidesPositionData();startInterval();function events(){arrowsNext.on("click",function(){pause();goForward();});arrowsPrev.on("click",function(){pause();goBackwards();});pagers.on("click",function(){pause();goAt(parseInt($(this).attr("id").replace("pristine-pager-",""))-1);});playButton.on("click",function(){startInterval();playButton.animate({"opacity":0},400);});}function init(){wrapper=$(".pristine-wrap");slides=$(".pristine-slide");pagers=$(".pristine-pager");arrowsNext=$(".pristine-arrow-next");arrowsPrev=$(".pristine-arrow-prev");playButton=$(".pristine-play");sliderWidth=$(".pristine-wrap").width();sliderHeight=$(".pristine-wrap").height();arrowsNext.not(arrowsNext.first()).hide();arrowsPrev.not(arrowsPrev.first()).hide();setActivePager(0);playButton.css({"opacity":0});}function startInterval(){clearInterval(interval);interval=setInterval(function(){goForward();},slideDuration);}function pause(){clearInterval(interval);playButton.animate({"opacity":1},400);}function goForward(){transitionOut(currentSlideIndex);currentSlideIndex=(currentSlideIndex==slides.length-1)?0:currentSlideIndex+1;transitionIn(currentSlideIndex);updateUI();}function goBackwards(){transitionOut(currentSlideIndex);currentSlideIndex=(currentSlideIndex==0)?slides.length-1:currentSlideIndex-1;transitionIn(currentSlideIndex);updateUI();}function goAt(index){transitionOut(currentSlideIndex);currentSlideIndex=index;transitionIn(currentSlideIndex);updateUI();}function updateUI(){setActivePager(currentSlideIndex);}function setActivePager(index){pagers.css({"background":"#ccc"});$(pagers[index]).css({"background":"#888"});}});})(jQuery);