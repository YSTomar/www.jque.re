function FeedMenu(sLinkSelector,sClass){var jqoFeedMenu=$('<span class="feed_menu"><select></select></span>');var jqoSelect=jqoFeedMenu.find("select");if(sClass){jqoFeedMenu.addClass(sClass)}var defaults={links:sLinkSelector||"link[type*=rss],link[type*=atom]"};this.build=function(mFeedLinks){mFeedLinks=mFeedLinks||defaults.links;var oAtom=$('<optgroup label="Atom Feeds"></optgroup>');var oRSS=$('<optgroup label="RSS Feeds"></optgroup>');var oAll=[];$(mFeedLinks).each(function(){var sFeedType=$(this).is("link[type*=rss]")?"rss":$(this).is("link[type*=atom]")?"atom":null;var sFeedTitle=$(this).is("link")?"Subscribe to '"+$(this).attr("title")+"'":$(this).attr("title");var oOption=$("<option></option>").html(sFeedTitle).attr("value",$(this).attr("href")).click(function(){document.location.href=$(this).attr("value");jqoFeedMenu.removeClass("feed_menu_focused")});if(sFeedType=="rss"){oRSS.append(oOption)}else{if(sFeedType=="atom"){oAtom.append(oOption)}}oAll.push(oOption)});if(oRSS.find("option").length>1){if($.browser.opera){jqoSelect.append(oRSS.find("option"))}else{jqoSelect.append(oRSS)}}if(oAtom.find("option").length>1){if($.browser.opera){jqoSelect.append(oAtom.find("option"))}else{jqoSelect.append(oAtom)}}else{for(opt in oAll){jqoSelect.append(oAll[opt])}}jqoSelect.blur(function(){if($.browser.msie||$.browser.safari||$.browser.opera){this.selectedIndex=-1}jqoFeedMenu.removeClass("open")}).focus(function(){if($.browser.msie||$.browser.safari||$.browser.opera){this.selectedIndex=-1}jqoFeedMenu.addClass("open")}).change(function(){if($.browser.msie||$.browser.safari||$.browser.opera){var i=this.selectedIndex;this.selectedIndex=-1;if(i>-1){var o=this.options[i];this.selectedIndex=-1;document.location.href=$(o).attr("value")}}}).get(0).selectedIndex=-1};this.write=function(mTarget){mTarget=mTarget||"body";this.build();$(mTarget).append(jqoFeedMenu)}};