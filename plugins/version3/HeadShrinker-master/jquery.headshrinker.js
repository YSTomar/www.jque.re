/*! *******
 *
 * jQuery HeadShrinker v1.0.2
 * Copyright (C) 2013 Chris Wharton (chris@weare2ndfloor.com)
 * View the more at https://github.com/weare2ndfloor/HeadShrinker
 *
 ********* */
(function($){$.fn.headshrinker=function(options){var defaults={target:jQuery(this),zindex:99999,shrinkBy:2,fontSize:"",shrinkMenu:false,revealAlign:"right",revealTop:"12px",shrinkMenuTop:"69px",menuSwitch:768,navTarget:"nav",mobileMenu:false};var options=$.extend(defaults,options);return this.each(function(){var target=options.target;var zindex=options.zindex;var shrinkBy=options.shrinkBy;var fontSize=options.fontSize;var shrinkMenu=options.shrinkMenu;var revealAlign=options.revealAlign;var revealTop=options.revealTop;var shrinkMenuTop=options.shrinkMenuTop;var menuSwitch=options.menuSwitch;var navTarget=options.navTarget;var mobileMenu=options.mobileMenu;var scrollTimeout="";var $window=jQuery(window);function headShrinker(){jQuery("body").addClass("headshrinker");var headShrink=jQuery(target).clone().css("position","fixed").addClass("headshrunk"),timeout,headerHeight=jQuery("header").outerHeight(),windowWidth=window.innerWidth||document.documentElement.clientWidth;$window.load(function(){var imgWidth=jQuery("img",headShrink).outerWidth()/shrinkBy;var imgHeight=jQuery("img",headShrink).outerHeight()/shrinkBy;jQuery(" img",headShrink).attr("width",imgWidth).attr("height",imgHeight);var paddingTopMain=jQuery(headShrink).css("padding-top").replace("px","").replace("em","");var paddingBottomMain=jQuery(headShrink).css("padding-bottom").replace("px","").replace("em","");jQuery(headShrink).css("padding-top",paddingTopMain/shrinkBy);jQuery(headShrink).css("padding-bottom",paddingBottomMain/shrinkBy);jQuery(" *",headShrink).each(function(){var paddingTop=jQuery(this).css("padding-top").replace("px","").replace("em","");var paddingBottom=jQuery(this).css("padding-bottom").replace("px","").replace("em","");var marginTop=jQuery(this).css("margin-top").replace("px","").replace("em","");var marginBottom=jQuery(this).css("margin-bottom").replace("px","").replace("em","");jQuery(this).css("padding-top",paddingTop/shrinkBy);jQuery(this).css("padding-bottom",paddingBottom/shrinkBy);jQuery(this).css("margin-top",marginTop/shrinkBy);jQuery(this).css("margin-top",marginBottom/shrinkBy);});});headShrink.css("width",windowWidth).prependTo("body");var shrinkHeight=headShrink.outerHeight();headShrink.css("top",-shrinkHeight).css("z-index",zindex);function showNav(){headShrink.css("display","block").stop().animate({top:0},500);}function hideNav(){if(windowWidth>=menuSwitch){if(headShrink.css("display")==="none"){return false;}else{headShrink.stop().animate({top:-shrinkHeight},300,function(){headShrink.css("display","none");});}}}function scrollFinish(){clearTimeout(timeout);timeout=setTimeout(onScroll,25);}function onScroll(){var windowTop=$window.scrollTop();windowWidth=window.innerWidth||document.documentElement.clientWidth;headShrink.css("width",windowWidth);if(windowTop>=shrinkHeight-25){showNav();}else{hideNav();}}if(fontSize){jQuery(" *",headShrink).each(function(){jQuery(this).css("font-size",fontSize);});}var shrinkMenuContents=jQuery(navTarget,headShrink).hide().html();function shrinkMenu(){jQuery(".headshrinker-reveal",headShrink).remove();jQuery(".headshrinker-menu",headShrink).remove();jQuery(navTarget,headShrink).hide();if(shrinkMenu===true||windowWidth<=menuSwitch){jQuery(headShrink).append('<a class="headshrinker-reveal hs-reveal-'+revealAlign+'" href="#nav" style="top:'+revealTop+'px !important">Show Menu</a><div class="headshrinker-menu" />');jQuery(".headshrinker-menu",headShrink).css("top",shrinkMenuTop).css("max-height",$window.height()).html(shrinkMenuContents).hide();jQuery(".headshrinker-menu ul ul",headShrink).each(function(){if(jQuery(this).children().length){jQuery(this).hide();jQuery(this,"li:first").parent().append('<a class="headshrinker-expand" href="#">+</a>');}});jQuery(".headshrinker-expand").on("click",function(e){e.preventDefault();if(jQuery(this).hasClass("headshrinker-clicked")){jQuery(this).text("+");jQuery(this).prev("ul").slideUp(300,function(){});}else{jQuery(this).text("-");jQuery(this).prev("ul").slideDown(300,function(){});}jQuery(this).toggleClass("headshrinker-clicked");});jQuery(".headshrinker-reveal",headShrink).html("<span /><span /><span />");jQuery(".headshrinker-reveal",headShrink).on("click",function(e){e.preventDefault();jQuery(this).toggleClass(".headshrinker-on");jQuery(".headshrinker-menu",headShrink).toggle();});}else{jQuery(navTarget,headShrink).show();}if(mobileMenu===true&&windowWidth<=menuSwitch){target.hide();showNav();jQuery("body").animate({marginTop:shrinkMenuTop},500);}else{target.show();jQuery("body").animate({marginTop:0},100);}}shrinkMenu();$window.on("scroll",scrollFinish);$window.on("resize",scrollFinish);$window.on("resize",shrinkMenu);}headShrinker();});};})(jQuery);