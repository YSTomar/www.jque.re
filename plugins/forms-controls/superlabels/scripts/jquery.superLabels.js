/*!
 *	Title: jQuery Super Labels Plugin - Give your forms a helping of awesome!
 *	Author: RÃ©my Bach
 *	Version: 2.0.3
 *	License: http://remybach.mit-license.org
 *	Url: http://github.com/remybach/jQuery.superLabels
 *	Description:
 *	This plugin allows you to display your form labels on top of your form fields, saving you space on your page.
 */
(function($){var defaults={autoCharLimit:false,baseZindex:0,debug:false,duration:500,easingIn:($.easing&&$.easing.def?"easeInOutCubic":false),easingOut:($.easing&&$.easing.def?"easeInOutCubic":false),fadeDuration:250,labelLeft:0,labelTop:0,noAnimate:false,opacity:0.5,slide:true,wrapSelector:false},acceptedInputTypes=["text","search","url","tel","email","password","number"],acceptedElements=["input","textarea","select"],_getLabel,_prepLabel,_focus,_blur,_keyup,_noVal,_withinCharLimit,_approximateChars,_log,_info,_error;$.fn.superLabels=function(options){var _fields=[],_newDefaults;if(this.length===0){return false;}_newDefaults=$.extend({},defaults);$(this).data("slDefaults",$.extend(_newDefaults,options||{})).addClass("sl-defaults");if(!$.easing.def){_info("Easing plugin not found - using standard jQuery animations.");}if(this.length===1&&/form/i.test(this[0].tagName)){_fields=$(acceptedElements.join(","),this);}else{if(this.length>1){this.each(function(){if(/form/i.test(this.tagName)){$.merge(_fields,$(acceptedElements.join(","),this));}else{_fields.push(this);}});}else{_fields=this;}}return $(_fields).each(function(){var _field=$(this),_label,_placeholder=_field.attr("placeholder"),_placeholderLabel;if((_field[0].tagName.toLowerCase()==="input"&&$.inArray(_field.attr("type"),acceptedInputTypes))===-1&&$.inArray(_field[0].tagName.toLowerCase(),acceptedElements)!==-1){_info("Doh! The following "+this.tagName.toLowerCase()+", is not supported.",this);return true;}_label=_getLabel(this);if(_placeholder){if(_label.length===0){_placeholderLabel='<label for="'+(_field.attr("id")||_field.attr("name"))+'">'+_placeholder+"</label>";_placeholderLabel+="</label>";_placeholderLabel=$(_placeholderLabel);_label=_placeholderLabel;_field.before(_label);}else{_label.attr("title",_placeholder);}_field.removeAttr("placeholder");}if(_label.length===0){_info("Doh! The following "+this.tagName.toLowerCase()+" has no related label.",this);return true;}_prepLabel(_field,_label);if(!this.tagName.match(/select/i)){_field.focus(_focus);_field.blur(_blur);_field.change(_blur);_field.bind("input",_keyup);_field.bind("propertychange",_blur);_field.keyup(_keyup);_label.click(function(){_field.focus();});}});};_getLabel=function(_field){var _defaults=$(_field).closest(".sl-defaults").data("slDefaults"),_label=$(_field).siblings("label"),_for;if(_label.length===0){if(_defaults.wrapSelector){_label=$(_field).parents(_defaults.wrapSelector).find("label");}else{_for=_field.id||_field.name;_label=$('[for="'+_for+'"]');}}return _label;};_prepLabel=function(_field,_label){var _charLimitAttr=_field.data("slCharLimit"),_defaults=$(_field).closest(".sl-defaults").data("slDefaults"),_opacity=0,_selected;if(_field[0].tagName.match(/select/i)){_selected=_field.find("[selected]").length===0?" selected":"";_field.prepend('<option value="" disabled'+_selected+' rel="label">'+_label.html()+"</option>");_label.css("display","none");}else{if(_charLimitAttr==="auto"||(_defaults.autoCharLimit&&isNaN(_charLimitAttr))){_approximateChars(_field,_label);}if(_noVal(_field)){_opacity=1;}else{if(_withinCharLimit(_field)){_opacity=_defaults._opacity;}}_field.css({zIndex:_defaults.baseZindex+1}).addClass("sl_field");_label.css({left:_noVal(_field)?_defaults.labelLeft:$(_field).width()-_label.width(),opacity:_opacity,position:"absolute",top:_defaults.labelTop,zIndex:_defaults.baseZindex+2}).addClass("sl_label");}};_focus=function(){var _defaults=$(this).closest(".sl-defaults").data("slDefaults"),_duration=_defaults.duration,_label,_to={opacity:0};if(_noVal(this)){_label=_getLabel(this);if(_defaults.noAnimate){_label.hide();return false;}if(_defaults.slide){_to.left=$(this).width()-_label.width();_to.opacity=_defaults.opacity;}else{_duration=_defaults.fadeDuration;}_label.stop(true,false).animate(_to,_duration,_defaults.easingOut);}};_blur=function(){var _defaults=$(this).closest(".sl-defaults").data("slDefaults"),_duration=_defaults.duration,_label,_to={opacity:1};if(_noVal(this)){_label=_getLabel(this);if(_defaults.noAnimate){_label.show();return false;}if(_defaults.slide){_to.left=_defaults.labelLeft;}else{_duration=_defaults.fadeDuration;}_label.stop(true,false).animate(_to,_duration,_defaults.easingOut);}else{_keyup.apply(this);}};_keyup=function(){var _defaults=$(this).closest(".sl-defaults").data("slDefaults"),_label,_o=0;if(_defaults.noAnimate){return false;}_label=_getLabel(this);if((_noVal(this)&&_label.css("opacity")>0)||(!_noVal(this)&&_label.css("opacity")===0)){return false;}if((_noVal(this)&&_label.css("opacity")!==0)||_withinCharLimit(this)){_o=_defaults.opacity;}_label.stop(true,false).animate({opacity:_o},_defaults.fadeDuration,_defaults.easingOut);};_noVal=function(_el){return $(_el).val()==="";};_withinCharLimit=function(_el){var _limit=$(_el).data("slCharLimit");if(!_limit||typeof _limit!=="number"){return false;}_el=_el.length?_el[0]:_el;return _limit&&_el.value&&_el.value.length<=_limit;};_approximateChars=function(_field,_label){var _available,_charLen,_chars="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_properties=["font-family","font-size","font-weight","letter-spacing","line-height","text-shadow","text-transform"],_tmp=$("<div>"+_chars+"</div>");$.each(_properties,function(i,_prop){_tmp.css(_prop,_field.css(_prop));});_tmp.css({position:"absolute",visibility:"hidden"});_field.parent().append(_tmp);_charLen=Math.round(_tmp.width()/_chars.length);_tmp.remove();_available=_field.width()-_label.width();_field.data("slCharLimit",Math.floor(_available/_charLen));};_log=function(){if(defaults.debug&&console&&console.log){console.log.apply(console,arguments);}};_info=function(){if(defaults.debug&&console&&console.info){console.info.apply(console,arguments);}};_error=function(){if(defaults.debug&&console&&console.error){console.error.apply(console,arguments);}};})(jQuery);